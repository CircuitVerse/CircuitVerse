<div id="loginModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">

        </div>
        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <div class="form-container">
            <h3>Log In</h3> <br>
            <%= form_with(model: resource, as: resource_name, url: new_session_path(resource_name),html: {id: "loginForm"}, format: :json, remote: true) do |f| %>
            <% flash.each do |key, value| %>
              <div class="alert alert-danger"><%= value %></div>
            <% end %>

            <div class="field form-group">
              <h6><%= f.label :email %></h6>
              <div class="input-group">
                <%= f.email_field :email, autofocus: true, class:"form-control editprofile-data-field" %>
              </div>
            </div>

            <div class="field form-group">
              <h6><%= f.label :password %></h6>
              <div class="input-group">
                <%= f.password_field :password, autocomplete: "off" ,class:"form-control editprofile-data-field", id:"password-input" %>
                <div class="input-group-addon align-self-center ml-3 mt-2" onclick="toggleLoginPassword()">
                  <i class="fa fa-eye-slash password-icon" aria-hidden="true" id="toggle-icon"></i>
                </div>
              </div>
            </div>
            <%- if devise_mapping.recoverable? && controller_name != 'passwords' && controller_name != 'registrations' %>
              <div class="field form-group">
                <div class="input-group text-right">
                  <%- if devise_mapping.recoverable? && controller_name != 'passwords' && controller_name != 'registrations' %>
                    <%= link_to "Forgot password?", new_password_path(resource_name),class:"anchor-text" %>
                  <% end -%>
                </div>
              </div>
            <% end -%>
            <% if devise_mapping.rememberable? -%>
              <div class="field form-group">
                <%= f.check_box :remember_me %>
                <%= f.label :remember_me ,class:"help-text" %>
              </div>
            <% end -%>

            <div class="field form-group">
              <div class="input-group">
                <%= f.submit "Log in" ,class:"btn button-primary layouts-login-popup-login-button" %>
                <span class="help-text">
                  New User?
                  <%= link_to "Sign up", new_registration_path(resource_name) ,class:"anchor-text pl-1" %>
                </span>

              </div>
            </div>

            <div class="field form-group mt-3">
              <%= render "users/shared/links" %>
            </div>
            <% end %>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script type="text/javascript">
  $("form#loginForm").bind("ajax:success", (data, status, xhr) =>{
//javascript that executes if everything goes o.k.
    // $('#loginModal').modal('hide');
    location.reload();
  });
</script>
