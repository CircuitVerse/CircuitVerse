<tr class="groups-table-rows">
  <td>
    <div class="groups-assignment-details groups-expanded-assignment-name">
      <%= @assignment.name %>
      <% if Flipper.enabled?(:lms_integration, @current_user) %>
        <% if @policy.admin_access? && @assignment.lti_integrated? %>
          <br>
          <a data-toggle="modal" href="#lmscredentialsModal-<%= assignment.id %>">Show LMS Credentials</a>
          <%= render partial: "lms_credentials_modal", locals: { assignment: assignment } %>
        <% end %>
      <% end %>
    </div>
  </td>
  <td>
    <div class="groups-assignment-deadline groups-assignment-date"
      data-year=<%= @deadline_year %>
      data-month=<%= @deadline_month %> data-day=<%= @deadline_day %>
      data-hour=<%= @deadline_hour %> data-minute=<%= @deadline_minute %>
      data-second=<%= @deadline_second %>
    >
      <%= @assignment.deadline %>
    </div>
    <% if(@assignment.deadline > Time.current) %>
      <p>
        (<%= t("groups.show.assignment.time_remaining_html", time_remaining: AssignmentDecorator.new(@assignment).time_remaining) %>)
      </p>
    <% end %>
  </td>
  <td>
    <div class="groups-assignment-details">
      <%= AssignmentDecorator.new(@assignment).graded %>
    </div>
  </td>
  <td class="groups-assignment-button-container">
    <div class="groups-assignment-details">
      <%= link_to group_assignment_path(@group, @assignment), class: "mini-button groups-view-mini-button" do %>
        <%= image_tag("SVGs/viewGroup.svg", alt: "View Assignment") %>
        <span><%= t("view") %></span>
      <% end %>
    </div>
    <% if @policy.mentor_access? %>
      <% if AssignmentDecorator.new(@assignment).closed? %>
        <div class="groups-assignment-details">
          <%= link_to reopen_group_assignment_path(@group, assignment), class: "mini-button groups-reopen-mini-button" do %>
            <%= image_tag("SVGs/reopenAssignment.svg", alt: "Reopen Assignment") %>
            <span><%= t("reopen") %></span>
          <% end %>
        </div>
      <% else %>
        <div class="groups-assignment-details">
          <%= link_to edit_group_assignment_path(@group, @assignment), class: "mini-button groups-reopen-mini-button" do %>
            <%= image_tag("SVGs/editGroup.svg", alt: "Edit Assignment") %>
            <span><%= t("edit") %></span>
          <% end %>
        </div>
        <div class="groups-assignment-details">
          <%= link_to close_group_assignment_path(@group, @assignment), class: "mini-button groups-close-mini-button", method: :put do %>
            <span><%= t("close") %></span>
          <% end %>
        </div>
      <% end %>
      <div class="groups-assignment-details">
        <%= link_to "#", class: "mini-button groups-delete-mini-button", data: { toggle: "modal", target: "#deleteassignmentModal", currentgroup: @group.id, currentassignment: @assignment.id } do %>
          <%= image_tag("SVGs/deleteGroup.svg", alt: "Delete Assignment") %>
          <span><%= t("delete") %></span>
        <% end %>
      </div>
    <% else %>
      <% project_assignment = assignment.projects.find { |p| p.author_id == current_user.id } %>
      <% if(assignment.deadline > Time.current) %>
        <% if project_assignment.nil? %>
          <div class="groups-assignment-details">
            <%= link_to assignment_start_path(@group, assignment), class: "mini-button groups-reopen-mini-button" do %>
              <%= image_tag("SVGs/editGroup.svg", alt: "Start Assignment") %>
              <span><%= t("groups.show.assignment.start_working_btn") %></span>
            <% end %>
          </div>
        <% else %>
          <div class="groups-assignment-details">
            <%= link_to user_project_path(current_user, project_assignment), class: "mini-button groups-reopen-mini-button" do %>
              <%= image_tag("SVGs/viewGroup.svg", alt: "View work") %>
              <span><%= t("groups.show.assignment.see_work_done") %></span>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <% if project_assignment.nil? %>
          <h6 class="groups-no-assignment-submission-text"><%= t("groups.show.assignment.not_submitted") %></h6>
        <% else %>
          <div class="groups-assignment-details">
            <%= link_to user_project_path(current_user, project_assignment), class: "mini-button groups-reopen-mini-button" do %>
              <%= image_tag("SVGs/viewGroup.svg", alt: "View submission") %>
              <span><%= t("groups.show.assignment.show_submission") %></span>
            <% end %>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </td>
  <% unless @policy.admin_access? %>
    <td>
      <% if policy(assignment).show_grades? && project_assignment.present? %>
        <div class="groups-assignment-details">
          <div class="groups-no-assignment-submission-text">
            <h6>
              <%= ProjectDecorator.new(project_assignment).grade_str %>
            </h6>
            <div class="groups-expanded-assignment-name">
              <p>(<%= ProjectDecorator.new(project_assignment).remarks_str %>)</p>
            </div>
          </div>
        </div>
      <% else %>
        <div class="groups-assignment-details">
          <h6 class="groups-no-assignment-submission-text"><%= t("not_available") %></h6>
        </div>
      <% end %>
    </td>
  <% end %>
</tr>
<tr class="groups-expanded-empty-table-row"></tr>
