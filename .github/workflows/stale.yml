name: Close inactive issues/PRs
on:
  schedule:
    - cron: "30 1 * * *"  # Runs daily at 01:30 UTC

jobs:
  close-issues:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write
    steps:
      - uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          
          # issue handling
          days-before-issue-stale: 14  
          days-before-issue-close: 180  
          stale-issue-label: "no-issue-activity"
          stale-issue-message: "This issue has been marked as stale because it has been inactive for 14 days. If no further activity occurs, it will be closed after 180 days."
          close-issue-message: "This issue has been closed due to inactivity for 180 days."
          exempt-issue-labels: "pinned, security"
        

          # PR handling
          days-before-pr-stale: 60
          days-before-pr-close: 180
          stale-pr-label: "no-pr-activity"
          stale-pr-message: "This PR has been marked as stale because it has been inactive for 14 days. Please update or close it if it's no longer needed. It will be closed after 180 days."
          close-pr-message: "This PR has been closed due to inactivity for 180 days."
          exempt-pr-labels: "wip" # work in progress

          # Performance Settings
          remove-stale-when-updated: true
          operations-per-run: 50
